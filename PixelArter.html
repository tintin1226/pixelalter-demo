<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelArter</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="profile.css">
    <link rel="stylesheet" href="assets.css">
    <link rel="stylesheet" href="pixel.css">
    <link rel="stylesheet" href="2d.css">
    <link rel="stylesheet" href="3d.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>

<body>
    <header>
        <img src="assets/logo.png" class="logo" alt="Logo">
        <div class="header-actions" style="padding-right: 1rem;">
            <button class="subscribe-btn">Subscribe</button>
            <i class="bi bi-person-circle account-icon" id="profile"></i>
            <button class="hamburger">&#9776;</button>
        </div>

        <nav class="mobile-nav">
            <a href="#" data-page="home">Home</a>
            <a href="#" data-page="products">Products</a>
            <a href="#" data-page="projects">My projects</a>
            <a href="#" data-page="about">About</a>
            <a href="#" data-page="logout">Logout</a>
        </nav>
    </header>

    <main id="app">
    </main>

    <script>
        const hamburger = document.querySelector('.hamburger');
        const mobileNav = document.querySelector('.mobile-nav');

        hamburger.addEventListener('click', () => {
            mobileNav.classList.toggle('show');
        });

        const navLinks = document.querySelectorAll('.mobile-nav a');

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault(); // stop default page reload
                const page = link.dataset.page;
                loadPage(page); // call your SPA function
                mobileNav.classList.remove('show'); // close mobile nav
            });
        });

        function loadPage(page) {
            switch (page) {
                case 'home':
                    loadIntro();
                    break;
                case 'products':
                    loadAssetsPage();
                    break;
                case 'projects':
                    loadProjectsPage();
                    break;
                case 'logout':
                    logoutUser();
                    break;
                case 'profile':
                    loadUserProfile();
            }
        }

        const profileIcon = document.getElementById('profile');
        profileIcon.addEventListener('click', () => {
            loadPage('profile');
        });


        // Function to show Premium Subscription modal
        function showPremiumModal() {
            // Check if modal already exists
            if (document.getElementById('premium-modal')) return;

            const modal = document.createElement('div');
            modal.id = 'premium-modal';
            modal.innerHTML = `
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <button class="close-modal"><i class="bi bi-x-lg"></i></button>
      <h2>Premium Subscription</h2>
      
      <div class="plan-toggle">
        <button class="plan-btn active" data-plan="monthly">Monthly</button>
        <button class="plan-btn" data-plan="yearly">Yearly</button>
      </div>

      <div class="plan-price" id="plan-price">$4.99 / month</div>

      <ul class="premium-perks">
        <li><i class="bi bi-check-circle-fill"></i> Access to premium assets</li>
        <li><i class="bi bi-check-circle-fill"></i> Premium export settings</li>
        <li><i class="bi bi-check-circle-fill"></i> Sell your assets on the marketplace</li>
        <li><i class="bi bi-check-circle-fill"></i> Priority support</li>
      </ul>

      <button class="subscribe-now">Subscribe Now</button>
    </div>
  `;

            document.body.appendChild(modal);

            const overlay = modal.querySelector('.modal-overlay');
            const closeBtn = modal.querySelector('.close-modal');
            const planBtns = modal.querySelectorAll('.plan-btn');
            const price = modal.querySelector('#plan-price');

            // Close modal
            overlay.addEventListener('click', () => modal.remove());
            closeBtn.addEventListener('click', () => modal.remove());

            // Plan toggle
            planBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    planBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    price.textContent = btn.dataset.plan === 'monthly' ? '$4.99 / month' : '$49.99 / year';
                });
            });

            // Subscribe action
            modal.querySelector('.subscribe-now').addEventListener('click', () => {
                alert('Subscribed! (mock action)');
                modal.remove();
            });
        }

        // Hook it up to the header subscribe button
        document.querySelector('.subscribe-btn').addEventListener('click', showPremiumModal);

    </script>
    <script src="index.js"></script>
    <script src="profile.js"></script>
    <script src="assets.js"></script>
    <script src="pixel.js"></script>
    <script src="2d.js"></script>
    <script src="3d.js"></script>
</body>

</html>